{{>layout/header}}

<div class="container mt-4">
    <h2 class="mb-4">{{#empForm.id}}게시글 수정{{/empForm.id}}{{^empForm.id}}게시글 등록{{/empForm.id}}</h2>

    <!-- 등록/수정 폼 -->
    <div class="card">
        <div class="card-body">
            <form action="{{#empForm.id}}/emp/update{{/empForm.id}}{{^empForm.id}}/emp/register{{/empForm.id}}" method="post">
                {{#empForm.id}}
                <input type="hidden" name="id" value="{{empForm.id}}">
                {{/empForm.id}}

                <div class="mb-3">
                    <label class="form-label">닉네임</label>
                    <input type="text" class="form-control" name="name" value="{{#empForm.name}}{{empForm.name}}{{/empForm.name}}" required>
                </div>

                <div class="mb-3">
                    <label class="form-label">카테고리</label>
                    <select class="form-select" name="tel" id="keywordSelect" required>
                        <option value="">키워드를 선택하세요</option>
                        <option value="#쓰레기">#쓰레기</option>
                        <option value="#에너지">#에너지</option>
                        <option value="#순환">#순환</option>
                        <option value="#재활용">#재활용</option>
                    </select>
                </div>
                {{#empForm.tel}}
                <script>
                    document.addEventListener('DOMContentLoaded', function() {
                        var select = document.getElementById('keywordSelect');
                        var currentValue = '{{empForm.tel}}';
                        if (select && currentValue) {
                            select.value = currentValue;
                        }
                    });
                </script>
                {{/empForm.tel}}

                <div class="mb-3">
                    <label class="form-label">타이틀</label>
                    <input type="text" class="form-control" name="address" value="{{#empForm.address}}{{empForm.address}}{{/empForm.address}}" required>
                </div>

                <div class="mb-3">
                    <label class="form-label">글내용</label>
                    <textarea class="form-control" rows="3" name="intro">{{#empForm.intro}}{{empForm.intro}}{{/empForm.intro}}</textarea>
                </div>

                <div class="d-flex gap-2">
                    <a href="/community" class="btn btn-secondary">취소</a>
                    <button type="submit" class="btn btn-primary">{{#empForm.id}}수정{{/empForm.id}}{{^empForm.id}}등록{{/empForm.id}}</button>
                    {{#empForm.id}}
                    <button type="button" class="btn btn-danger" onclick="if(confirm('정말 삭제하시겠습니까?')) { document.getElementById('deleteForm').submit(); }">삭제</button>
                    {{/empForm.id}}
                </div>
            </form>
            {{#empForm.id}}
            <form id="deleteForm" action="/emp/delete/{{empForm.id}}" method="post" style="display: none;">
            </form>
            {{/empForm.id}}
        </div>
    </div>
</div>

{{>layout/footer}}